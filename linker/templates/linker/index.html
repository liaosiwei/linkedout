{% extends "linker/base.html" %} {% load staticfiles %} {% load linker_extras %}{% block css %}	<link href="{% static 'linker/css/jquery-ui.css' %}" rel="stylesheet">	<style type="text/css">      	#favicon {      		position: relative;       		top: -2px;       		witdth: 40px; height: 14px;      	}      	#create-link {      		position: absolute;       		right: 160px; top: 200px;      	}      	#link-trash {      		position: absolute; right: 150px; bottom: 200px;      		width: 60px; height: 60px;      	}      	#effect {       		width: 200px; height: 60px;       		padding: 0.4em; position: absolute;       		right: 80px; bottom: 280px;       		text-align: center;      	}      	#effect h3 {       		margin: 0;        		font-size: 1.2em;       		text-align: center;       	}      }  	</style>{% endblock %} {% block content %}	{% if user.is_authenticated %}	<h3><a href="downloadXml">download your file</a></h3>	<div id="accordion">		{% for container in container_list %}			<h3>{{ container.name }}</h3>			<div>				<table class="table table-hover table-condensed">					{% for link in container.linker_set.all|dictsort:"id" %}						{% if not link.deleted %}							<tr>								<td class="onelink">									<img id="favicon" src="{{link.link | getFavicon }}" />									<a href="{{link.link}}" target="_blank">{{ link.name }}</a>								</td>   								<td class="text-info">									{{ link.opinion}}								</td>							</tr>						{% endif %}					{% endfor %}				</table>			</div>		{% endfor %}	</div>	{% else %}	<h1>欢迎</h1>	<p>		没有账号<a href="auths/register"><strong>请注册</strong></a>，登陆后可以使用个性化书签设置</p>	<div id="accordion">		<h3>			<strong>常用网站</strong>		</h3>		<div>			<p>				<a href="http://www.baidu.com" target="_blank">百度</a>			</p>		</div>		<h3>Section 2</h3>		<div>			<p>Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum				sit amet purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris				turpis porttitor velit, faucibus interdum tellus libero ac justo.				Vivamus non quam. In suscipit faucibus urna.</p>		</div>	</div>	{% endif %}	<div id="dialog-form" title="新建书签">	  <p class="validateTips"></p>	 	  <form>	  <fieldset>	  	<label for="container">分类</label>	    <input type="text" name="container" id="container" />	    <label for="name">名称</label>	    <input type="text" name="name" id="name" />	    <label for="address">网址</label>	    <input type="text" name="address" id="address" value="" />	    <label for="tip">说明</label>	    <input type="text" name="tip" id="tip" value="" />	  </fieldset>	  </form>	</div>	<button id="create-link"><strong>+</strong></button>	  	  <div id="effect" class="ui-widget-content ui-corner-all">	    <h3 class="ui-widget-header">删除书签</h3>	    <p>将书签拖动到此处即可删除</p>	  </div>		<button id="link-trash"><img src="{% static 'linker/img/trash.jpg' %}" /></button> {% endblock %} 	{% block js%}	<script src="{% static 'linker/js/jquery-ui.js' %}"></script>	<script src="{% static 'linker/js/addurls.js' %}"></script>	<script>	  $(document).ready(function() {	 	  	    $( "#accordion" ).accordion({	    	heightStyle: "content",	    	event: "click hoverintent"	    });  	    	    $( "#create-link" )	      .button()	      .click(function() {	        $( "#dialog-form" ).dialog( "open" );	      });	    	    $( "td.onelink" ).draggable({	    	  cursor: "move",   		      appendTo: "body",   		      helper: "clone"	    });	    	    function handle_del_url(data) {	    	window.location = "/";	    }	    	    $( "#link-trash" ).droppable({	        drop: function(event, ui) {            	var delData = {};            	delData['link_container'] = ui.draggable.parent().parent().parent().parent().prev("h3").text();            	delData['link_url'] = ui.draggable.find("a").attr("href");	            $.ajax({	            	url:"/ajaxDelUrl/",	            	type: "POST",	            	data: delData,	            	dataType: "json",	            	success: handle_del_url	            });	        }	      });	    function runEffect() {	    	var options = { to: { width: 280, height: 185 } };	        // run the effect	        $( "#effect" ).show( "clip", options, 500, callback );	      };	   	      //callback function to bring a hidden box back 	    function callback() {	      setTimeout(function() {	        $( "#effect:visible" ).fadeOut();	        }, 1000 );	    };	     	    // set effect from select menu value 	    $( "#link-trash" ).click(function() {	       runEffect();	       return false;	    });	   	    $( "#effect" ).hide();	    	    // juery-ui's auto-complete widget 	    $("#container").autocomplete({    	  source: "/autoComplete/",    	  minLength: 2	    });	  })	</script>	<script src="{% static 'linker/js/mouseover.js' %}"></script>{% endblock %}